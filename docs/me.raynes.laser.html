<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>me.raynes.laser documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Laser 1.0.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="me.raynes.laser.html"><span>me.raynes.laser</span></a></li><li><a href="me.raynes.laser.zip.html"><span>me.raynes.laser.zip</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="me.raynes.laser.html#var-add-class"><span>add-class</span></a></li><li><a href="me.raynes.laser.html#var-adjacent-to"><span>adjacent-to</span></a></li><li><a href="me.raynes.laser.html#var-and"><span>and</span></a></li><li><a href="me.raynes.laser.html#var-any"><span>any</span></a></li><li><a href="me.raynes.laser.html#var-at"><span>at</span></a></li><li><a href="me.raynes.laser.html#var-attr"><span>attr</span></a></li><li><a href="me.raynes.laser.html#var-attr%3D"><span>attr=</span></a></li><li><a href="me.raynes.laser.html#var-attr%3F"><span>attr?</span></a></li><li><a href="me.raynes.laser.html#var-child-of"><span>child-of</span></a></li><li><a href="me.raynes.laser.html#var-class%3D"><span>class=</span></a></li><li><a href="me.raynes.laser.html#var-classes"><span>classes</span></a></li><li><a href="me.raynes.laser.html#var-content"><span>content</span></a></li><li><a href="me.raynes.laser.html#var-defdocument"><span>defdocument</span></a></li><li><a href="me.raynes.laser.html#var-defragment"><span>defragment</span></a></li><li><a href="me.raynes.laser.html#var-descendant-of"><span>descendant-of</span></a></li><li><a href="me.raynes.laser.html#var-document"><span>document</span></a></li><li><a href="me.raynes.laser.html#var-element%3D"><span>element=</span></a></li><li><a href="me.raynes.laser.html#var-fragment"><span>fragment</span></a></li><li><a href="me.raynes.laser.html#var-fragment-to-html"><span>fragment-to-html</span></a></li><li><a href="me.raynes.laser.html#var-id"><span>id</span></a></li><li><a href="me.raynes.laser.html#var-id%3D"><span>id=</span></a></li><li><a href="me.raynes.laser.html#var-insert"><span>insert</span></a></li><li><a href="me.raynes.laser.html#var-negate"><span>negate</span></a></li><li><a href="me.raynes.laser.html#var-node"><span>node</span></a></li><li><a href="me.raynes.laser.html#var-nodes"><span>nodes</span></a></li><li><a href="me.raynes.laser.html#var-on"><span>on</span></a></li><li><a href="me.raynes.laser.html#var-or"><span>or</span></a></li><li><a href="me.raynes.laser.html#var-parse"><span>parse</span></a></li><li><a href="me.raynes.laser.html#var-parse-fragment"><span>parse-fragment</span></a></li><li><a href="me.raynes.laser.html#var-re-attr"><span>re-attr</span></a></li><li><a href="me.raynes.laser.html#var-re-class"><span>re-class</span></a></li><li><a href="me.raynes.laser.html#var-re-id"><span>re-id</span></a></li><li><a href="me.raynes.laser.html#var-remove"><span>remove</span></a></li><li><a href="me.raynes.laser.html#var-remove-class"><span>remove-class</span></a></li><li><a href="me.raynes.laser.html#var-replace"><span>replace</span></a></li><li><a href="me.raynes.laser.html#var-select"><span>select</span></a></li><li><a href="me.raynes.laser.html#var-select-locs"><span>select-locs</span></a></li><li><a href="me.raynes.laser.html#var-select-walk"><span>select-walk</span></a></li><li><a href="me.raynes.laser.html#var-text"><span>text</span></a></li><li><a href="me.raynes.laser.html#var-to-html"><span>to-html</span></a></li><li><a href="me.raynes.laser.html#var-unescaped"><span>unescaped</span></a></li><li><a href="me.raynes.laser.html#var-update-attr"><span>update-attr</span></a></li><li><a href="me.raynes.laser.html#var-wrap"><span>wrap</span></a></li><li><a href="me.raynes.laser.html#var-zip"><span>zip</span></a></li><li><a href="me.raynes.laser.html#var-zipper%3F"><span>zipper?</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>me.raynes.laser documentation</h2><pre class="doc"></pre><div class="public" id="var-add-class"><h3>add-class</h3><div class="usage"><code>(add-class class)</code></div><pre class="doc">Add a class to the node. Does not replace existng classes.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L250">Source</a></div></div><div class="public" id="var-adjacent-to"><h3>adjacent-to</h3><div class="usage"><code>(adjacent-to &amp; selectors)</code></div><pre class="doc">Checks that the last selector matches the current loc. If so,
checks to see if the proceeding node matches the next selector.
If so, repeat until all selectors are matched or one doesn't.
Equivalent to 'foo + bar + baz' in CSS for matching a baz element
is proceeded by a bar element that is proceeded by a foo element.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L189">Source</a></div></div><div class="public" id="var-and"><h3>and</h3><div class="usage"><code>(and &amp; selectors)</code></div><pre class="doc">Like and, but for selectors. Returns true iff all selectors match.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L140">Source</a></div></div><div class="public" id="var-any"><h3>any</h3><div class="usage"><code>(any)</code></div><pre class="doc">A selector that matches any node.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L129">Source</a></div></div><div class="public" id="var-at"><h3>at</h3><div class="usage"><code>(at node &amp; fns)</code></div><pre class="doc">Takes a single hickory node (like a transformer function) and walks it
applying selectors and transformers just like fragment. Useful for
doing sub-walks inside of fragments and document transformers. Has nothing
to do with Enlive. If the result is only one node that node is returned.
Otherwise, returns the seq of nodes.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L317">Source</a></div></div><div class="public" id="var-attr"><h3>attr</h3><div class="usage"><code>(attr attr value)</code></div><pre class="doc">Set attribute attr to value.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L230">Source</a></div></div><div class="public" id="var-attr%3D"><h3>attr=</h3><div class="usage"><code>(attr= attr value)</code></div><pre class="doc">A selector that checks to see if attr exists and has the value.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L85">Source</a></div></div><div class="public" id="var-attr%3F"><h3>attr?</h3><div class="usage"><code>(attr? attr)</code></div><pre class="doc">A selector that matches any element that has the attribute,
regardless of value.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L98">Source</a></div></div><div class="public" id="var-child-of"><h3>child-of</h3><div class="usage"><code>(child-of &amp; selectors)</code></div><pre class="doc">Checks that the last selector matches the current loc. If so,
checks to see if the immediate parent matches the next selector.
If so, repeat. Equivalent to 'foo &gt; bar &gt; baz' in CSS for matching
a baz element whose parent is a bar element whose parent is a foo
element.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L198">Source</a></div></div><div class="public" id="var-class%3D"><h3>class=</h3><div class="usage"><code>(class= &amp; classes)</code></div><pre class="doc">A selector that matches if the node has these classes.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L110">Source</a></div></div><div class="public" id="var-classes"><h3>classes</h3><div class="usage"><code>(classes value)</code></div><pre class="doc">Set the node's class attribute to the string.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L240">Source</a></div></div><div class="public" id="var-content"><h3>content</h3><div class="usage"><code>(content s)</code></div><pre class="doc">Set content of node to the string s. s can either be a collection of nodes
or a node (a map or a string). Any strings will automatically be escaped
unless wrapped in the RawHTML type by calling `unescaped` on them.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L209">Source</a></div></div><div class="public" id="var-defdocument"><h3>defdocument</h3><h4 class="macro">macro</h4><div class="usage"><code>(defdocument name s args bindings &amp; transformations)</code></div><pre class="doc">Define a function that transforms an HTML document. The first
argument should be the name of the function, the second argument
is the string of HTML or readable thing (such as a resource from
clojure.java.io/resource or a file), third argument are arguments
the function can take, and an optional forth argument should be a
vector of bindings to give to let that will be visible to the body.
The rest of the arguments are selector and transformer pairs.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L345">Source</a></div></div><div class="public" id="var-defragment"><h3>defragment</h3><h4 class="macro">macro</h4><div class="usage"><code>(defragment name s args bindings &amp; transformations)</code></div><pre class="doc">Define a function that transforms a fragment of HTML. The first
argument should be the name of the function, the second argument
is the string of HTML or readable thing (such as a resource from
clojure.java.io/resource or a file), third argument are arguments
the function can take, and an optional forth argument should be a
vector of bindings to give to let that will be visible to the body.
The rest of the arguments are selector and transformer pairs.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L329">Source</a></div></div><div class="public" id="var-descendant-of"><h3>descendant-of</h3><div class="usage"><code>(descendant-of &amp; selectors)</code></div><pre class="doc">Checks that the last selector passed matches the current loc. If so,
walks up the tree checking the next selector to see if it matches,
any ancestor nodes. If so, repeat. Equivalent to 'foo bar baz' in CSS
for matching a baz element that has a bar ancestor that has a foo
ancestor.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L180">Source</a></div></div><div class="public" id="var-document"><h3>document</h3><div class="usage"><code>(document s &amp; fns)</code></div><pre class="doc">Transform an HTML document. Use this for any top-level transformation.
It expects a full HTML document (complete with &lt;html&gt; and &lt;head&gt;) and
makes it one if it doesn't get one. Takes HTML parsed by the parse-html
function.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L294">Source</a></div></div><div class="public" id="var-element%3D"><h3>element=</h3><div class="usage"><code>(element= element)</code></div><pre class="doc">A selector that matches an element with this name.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L80">Source</a></div></div><div class="public" id="var-fragment"><h3>fragment</h3><div class="usage"><code>(fragment s &amp; fns)</code></div><pre class="doc">Transform an HTML fragment. Use document for transforming full HTML
documents. This function does not return HTML, but instead returns a
sequence of zippers of the transformed HTML. This is to make
composing fragments faster. You can call to-html on the output to get
HTML.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L302">Source</a></div></div><div class="public" id="var-fragment-to-html"><h3>fragment-to-html</h3><div class="usage"><code>(fragment-to-html z)</code></div><pre class="doc">Takes a parsed fragment and converts it back to HTML.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L61">Source</a></div></div><div class="public" id="var-id"><h3>id</h3><div class="usage"><code>(id value)</code></div><pre class="doc">Set the node's id to the string.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L245">Source</a></div></div><div class="public" id="var-id%3D"><h3>id=</h3><div class="usage"><code>(id= id)</code></div><pre class="doc">A selector that matches the node's id.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L121">Source</a></div></div><div class="public" id="var-insert"><h3>insert</h3><div class="usage"><code>(insert direction nodes)</code></div><pre class="doc">Inserts node(s) in direction which can be either :left or :right.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L218">Source</a></div></div><div class="public" id="var-negate"><h3>negate</h3><div class="usage"><code>(negate selector)</code></div><pre class="doc">Negates a selector. Like clojure.core/not.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L135">Source</a></div></div><div class="public" id="var-node"><h3>node</h3><div class="usage"><code>(node tag &amp; {:keys [type content attrs], :or {type :element}})</code></div><pre class="doc">Create a hickory node. The most information you need to provide is the tag
name. Optional keyword arguments allow you to provide the rest. If you don't,
defaults will be provided. Keys that can be passed are :type, :content, and
:attrs</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L64">Source</a></div></div><div class="public" id="var-nodes"><h3>nodes</h3><div class="usage"><code>(nodes s)</code></div><pre class="doc">Normalizes nodes. If s is a string, parse it as a fragment and get
a sequence of nodes. If s is sequential already, return it assuming
it is already a seq of nodes. If it is anything else, wrap it in a
vector (for example, if it is a map, this will make it a vector of
maps (nodes)</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L30">Source</a></div></div><div class="public" id="var-on"><h3>on</h3><div class="usage"><code>(on node &amp; transformers)</code></div><pre class="doc">Compose the transformers and run them on the node.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L278">Source</a></div></div><div class="public" id="var-or"><h3>or</h3><div class="usage"><code>(or &amp; selectors)</code></div><pre class="doc">Like or, but for selectors. Returns true iff at least one selector matches.
Like 'foo,bar' in css.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L145">Source</a></div></div><div class="public" id="var-parse"><h3>parse</h3><div class="usage"><code>(parse s)</code></div><pre class="doc">Parses an HTML document. This is for top-level full documents,
complete with &lt;body&gt;, &lt;head&gt;, and &lt;html&gt; tags. If they are not
present, they will be added to the final result. s can be a string
in which case it will be treated as a string of HTML or it can be
something that can be slurped (reader, file, etc).</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L16">Source</a></div></div><div class="public" id="var-parse-fragment"><h3>parse-fragment</h3><div class="usage"><code>(parse-fragment s)</code></div><pre class="doc">Parses an HTML fragment. s can be a string in which case it will be treated
as a string of HTML or it can be something than can be slurped (reader, file,
etc).</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L46">Source</a></div></div><div class="public" id="var-re-attr"><h3>re-attr</h3><div class="usage"><code>(re-attr attr re)</code></div><pre class="doc">A selector that checks to see if attr exists and the regex matches
its value.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L91">Source</a></div></div><div class="public" id="var-re-class"><h3>re-class</h3><div class="usage"><code>(re-class re)</code></div><pre class="doc">A selector that matches if any of the node's classes match a regex.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L115">Source</a></div></div><div class="public" id="var-re-id"><h3>re-id</h3><div class="usage"><code>(re-id re)</code></div><pre class="doc">A convenience function for checking if the id attr of a node matches a regex.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L125">Source</a></div></div><div class="public" id="var-remove"><h3>remove</h3><div class="usage"><code>(remove)</code></div><pre class="doc">Delete a node.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L270">Source</a></div></div><div class="public" id="var-remove-class"><h3>remove-class</h3><div class="usage"><code>(remove-class class)</code></div><pre class="doc">Remove a class from a node. Does not touch other classes.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L257">Source</a></div></div><div class="public" id="var-replace"><h3>replace</h3><div class="usage"><code>(replace node)</code></div><pre class="doc">Replace a node.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L274">Source</a></div></div><div class="public" id="var-select"><h3>select</h3><div class="usage"><code>(select zip &amp; selectors)</code></div><pre class="doc">Select nodes that match one of the selectors.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L384">Source</a></div></div><div class="public" id="var-select-locs"><h3>select-locs</h3><div class="usage"><code>(select-locs zip &amp; selectors)</code></div><pre class="doc">Select locs that match one of the selectors.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L376">Source</a></div></div><div class="public" id="var-select-walk"><h3>select-walk</h3><div class="usage"><code>(select-walk continue? move selectors)</code></div><pre class="doc">A generalied function for implementing selectors that do the following
1) check if the last selector matches the current loc, 2) check that the
selector before it matches a new loc after a movement, and so on. Unless all
the selectors match like this, the result is a non-match. The first argument
is a function that will be run on the result of the selector call and the loc
itself and should return true to continue or false to stop. The second argument
tells the function how to move in the selector. For example, zip/up.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L151">Source</a></div></div><div class="public" id="var-text"><h3>text</h3><div class="usage"><code>(text node)</code></div><pre class="doc">Returns the text value of a node and its contents.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L363">Source</a></div></div><div class="public" id="var-to-html"><h3>to-html</h3><div class="usage"><code>(to-html z)</code></div><pre class="doc">Convert a hickory zip back to html.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L53">Source</a></div></div><div class="public" id="var-unescaped"><h3>unescaped</h3><div class="usage"><code>(unescaped s)</code></div><pre class="doc">Create an instance of RawHTML.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/#L133">Source</a></div></div><div class="public" id="var-update-attr"><h3>update-attr</h3><div class="usage"><code>(update-attr attr f &amp; args)</code></div><pre class="doc">Update an attribute with a function and optionally some args.
</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L235">Source</a></div></div><div class="public" id="var-wrap"><h3>wrap</h3><div class="usage"><code>(wrap tag &amp; [attrs])</code></div><pre class="doc">Wrap a node around the node. Provide the element name as a key (like :div)
and optionally a map of attributes.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser.clj#L264">Source</a></div></div><div class="public" id="var-zip"><h3>zip</h3><div class="usage"><code>(zip n)</code></div><pre class="doc">Get a zipper suitable for passing to fragment, document, or select, from
a hickory node or a sequence of hickory nodes.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser/zip.clj#L44">Source</a></div></div><div class="public" id="var-zipper%3F"><h3>zipper?</h3><div class="usage"><code>(zipper? obj)</code></div><pre class="doc">Checks to see if the object has zip/make-node metadata on it (confirming it
to be a zipper.</pre><div class="src-link"><a href="https://github.com/Raynes/laser/tree/e1beb765cf40564a789fa5d2d5f795e9df724530/src/me/raynes/laser/zip.clj#L38">Source</a></div></div></div></body></html>